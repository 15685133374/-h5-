{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-8af54be4\"],{\"46f9\":function(e,t,r){\"use strict\";r(\"8e6e\"),r(\"ac6a\"),r(\"456d\");var o=r(\"bd86\"),n=r(\"1407\"),i=r.n(n);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(r,!0).forEach((function(t){Object(o[\"a\"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){return{position:\"absolute\",top:0,left:0,zIndex:0,height:\"100%\",width:\"100%\",backgroundSize:t?\"contain\":\"cover\",backgroundRepeat:\"no-repeat\",backgroundImage:\"url(\".concat(e,\")\")}}t[\"a\"]={props:{qrcodeUrl:String,coverImageUrl:String},methods:{getCover:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.$createElement,o=70,n=c({},l(e,t),{zIndex:1,width:\"\".concat(o,\"%\"),margin:\"0 \".concat(50-o/2,\"%\")});return[r(\"div\",{style:n})]},getCoverBg:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.$createElement,o=c({},l(e),{filter:!t&&\"blur(10px)\"});return[r(\"div\",{style:o})]}},render:function(e){var t=[this.getCover(i.a,!0)],r=this.coverImageUrl;return this.qrcodeUrl?t=this.getCoverBg(this.qrcodeUrl,!0):r&&(t=[this.getCover(r),this.getCoverBg(r)]),e(\"div\",{class:\"card-cover-wrapper\"},[t])}}},dfc1:function(e,t,r){\"use strict\";r.r(t);r(\"8e6e\"),r(\"ac6a\"),r(\"456d\");var o=r(\"bd86\"),n=r(\"2f62\"),i=r(\"d055\"),a=r.n(i),c=r(\"d3b5\"),l=r(\"46f9\");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(r,!0).forEach((function(t){Object(o[\"a\"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d,u,f={props:{work:{type:Object,default:function(){}},handleClickEdit:{type:Function,default:function(){}},handleClickPreview:{type:Function,default:function(){}},handleUseTemplate:{type:Function,default:function(){}}},data:function(){return{qrcodeUrl:\"\"}},methods:{timeFmt:function(e){var t=new Date(e),r=\"\".concat(t.getFullYear(),\"-\").concat(t.getMonth()+1,\"-\").concat(t.getDate());return r},genQRCodeUrl:function(e){var t=this,r=\"/works/preview/\".concat(e.id);a.a.toDataURL(r,(function(e,r){e&&console.log(e),t.qrcodeUrl=r}))}},render:function(e){var t=this;return e(\"a-card\",{attrs:{hoverable:!0}},[e(l[\"a\"],{slot:\"cover\",attrs:{qrcodeUrl:this.qrcodeUrl,coverImageUrl:this.work.cover_image_url}}),e(\"template\",{class:\"ant-card-actions\",slot:\"actions\"},[e(\"a-tooltip\",{attrs:{effect:\"dark\",placement:\"bottom\",title:this.$t(\"workCard.useNow\")}},[e(\"a-icon\",{attrs:{type:\"plus-square\",title:this.$t(\"workCard.useNow\")},on:{click:function(){t.handleUseTemplate(t.work)}}})]),e(\"a-tooltip\",{attrs:{effect:\"dark\",placement:\"bottom\",title:this.$t(\"workCard.preview\")}},[e(\"a-icon\",{attrs:{type:\"eye\",title:this.$t(\"workCard.preview\")},on:{click:this.handleClickPreview}})]),this.qrcodeUrl?e(\"a-icon\",{attrs:{type:\"close-circle\"},on:{click:function(){t.qrcodeUrl=\"\"}}}):e(\"a-icon\",{attrs:{type:\"qrcode\"},on:{click:function(){return t.genQRCodeUrl(t.work)}}})]),e(\"a-card-meta\",[e(\"div\",{slot:\"title\",class:\"ant-card-meta-title\",style:\"font-size: 14px;\"},[this.work.title,\"(\",this.work.id,\")\"]),e(\"div\",{slot:\"description\",style:\"font-size: 12px;\"},[e(\"div\",[this.$t(\"workCard.description\"),\": \",this.work.description]),e(\"div\",[this.$t(\"workCard.createTime\"),\": \",this.timeFmt(this.work.created_at)])])])])}},h={components:{ListItemCard:f},data:function(){return{activeWork:null,previewVisible:!1,useTemplateDialogVisible:!1,clonedWorkFromTemplate:null}},computed:p({},Object(n[\"c\"])(\"editor\",[\"works\",\"workTemplates\"]),{},Object(n[\"c\"])(\"loading\",[\"fetchWorks_loading\"])),methods:p({},Object(n[\"b\"])(\"editor\",[\"fetchWorks\",\"fetchWorkTemplates\",\"useTemplate\"]),{deleteWork:function(e){}}),render:function(e){var t=this;return e(\"div\",{class:\"works-wrapper\"},[e(\"a-row\",{attrs:{gutter:12}},[this.fetchWorkTemplates_loading?e(\"a-col\",{attrs:{span:24},style:\"margin-bottom: 10px;text-align: center;height: 355px;line-height: 355px;border-bottom: 1px solid #ebedf0;background: rgba(255, 255, 255, 0.5);\"},[e(\"a-spin\",{attrs:{tip:\"作品列表获取中...\"}})]):this.workTemplates.map((function(r){return e(\"a-col\",{attrs:{span:6},key:r.id,style:\"margin-bottom: 20px;\"},[e(f,{attrs:{work:r,handleClickPreview:function(e){t.previewVisible=!0,t.activeWork=r},handleUseTemplate:function(e){t.useTemplateDialogVisible=!0,t.useTemplate(e.id).then((function(e){t.clonedWorkFromTemplate=e}))}}})])}))]),e(c[\"a\"],{attrs:{work:this.activeWork||{},visible:this.previewVisible,handleClose:function(){t.previewVisible=!1}}}),this.useTemplateDialogVisible&&e(\"a-modal\",{attrs:{visible:!0,width:\"240px\",okText:\"保存\",footer:null,closable:!1,centered:!0}},[e(\"div\",{style:\"text-align: center;\"},[this.clonedWorkFromTemplate?e(\"div\",[e(\"div\",{style:{margin:\"12px\"}},[e(\"a-icon\",{attrs:{type:\"check-circle\",theme:\"twoTone\",twoToneColor:\"#52c41a\"}}),' 模板已保存至\"我的作品\"中']),e(\"a-button\",{on:{click:function(){t.useTemplateDialogVisible=!1,t.clonedWorkFromTemplate=null}}},[\"我再逛逛\"]),e(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(){var e=t.$router.resolve({name:\"editor\",params:{workId:t.clonedWorkFromTemplate.id}});window.open(e.href,\"_blank\")}},style:{marginLeft:\"12px\"}},[\"立即查看\"])]):e(\"a-spin\",{attrs:{tip:\"复制中\"}})])])])},created:function(){this.fetchWorkTemplates()}},m=h,b=r(\"2877\"),w=Object(b[\"a\"])(m,d,u,!1,null,null,null);t[\"default\"]=w.exports}}]);","extractedComments":[]}