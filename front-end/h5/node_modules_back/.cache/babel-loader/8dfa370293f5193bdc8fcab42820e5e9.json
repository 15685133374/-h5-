{"remainingRequest":"D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\thread-loader\\dist\\cjs.js!D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\luban\\luban-h5\\front-end\\h5\\src\\store\\plugins\\undo-redo\\index.js","dependencies":[{"path":"D:\\project\\luban\\luban-h5\\front-end\\h5\\src\\store\\plugins\\undo-redo\\index.js","mtime":1575526862422},{"path":"D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1575454486584},{"path":"D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1575454488217},{"path":"D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\babel-loader\\lib\\index.js","mtime":1575361257763}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport { cloneDeep } from 'lodash';\nimport undoRedoHistory from \"./History\";\n/**\r\n * #!zh: setElementCommonStyle 因为是在 mousemove 时候触发的，执行过于频繁，没有必要计入history，因此需要过滤。\r\n * 主要记录：拖动完成时候(mouseup)时候的位置、删除元素之前的状态等\r\n */\n// const unRecordHistoryMutationTypes = ['editor/setElementCommonStyle']\n\nvar recordHistoryMutationTypes = ['editor/recordRect', 'editor/elementManager'];\n\nvar undoRedoPlugin = function undoRedoPlugin(store) {\n  // initialize and save the starting stage\n  undoRedoHistory.init(store);\n  var firstState = cloneDeep(store.state);\n  undoRedoHistory.addState(firstState);\n  store.subscribe(function (mutation, state) {\n    var type = mutation.type;\n    if (!recordHistoryMutationTypes.includes(type)) return; // is called AFTER every mutation\n\n    undoRedoHistory.addState(cloneDeep(state));\n  });\n};\n\nexport default undoRedoPlugin;",null]}