{"remainingRequest":"d:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\babel-loader\\lib\\index.js!d:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!d:\\project\\luban\\luban-h5\\front-end\\h5\\src\\components\\core\\editor\\edit-panel\\animation.js","dependencies":[{"path":"d:\\project\\luban\\luban-h5\\front-end\\h5\\src\\components\\core\\editor\\edit-panel\\animation.js","mtime":1575526862162},{"path":"d:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1575454486584},{"path":"d:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\babel-loader\\lib\\index.js","mtime":1575361257763},{"path":"d:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1575454465101}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.match\";\nimport _defineProperty from \"d:\\\\project\\\\luban\\\\luban-h5\\\\front-end\\\\h5\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { mapState } from 'vuex';\nimport { animationOptions, animationValue2Name, firstLevelAnimationOptions } from '@/constants/animation.js';\nexport default {\n  computed: _objectSpread({}, mapState('editor', ['editingElement']), {\n    animationQueue: function animationQueue() {\n      return this.editingElement && this.editingElement.animations || [];\n    }\n  }),\n  data: function data() {\n    return {\n      // animationQueue: [],\n      activeCollapsePanel: 0,\n      activePreviewAnimation: '',\n      drawerVisible: false\n    };\n  },\n  methods: {\n    addAnimation: function addAnimation() {\n      // TODO move this to vuex\n      this.animationQueue.push({\n        type: '',\n        duration: 1,\n        delay: 0,\n        interationCount: 1,\n        infinite: false\n      });\n      this.activeCollapsePanel = this.animationQueue.length - 1;\n    },\n    deleteAnimate: function deleteAnimate(index) {\n      // TODO move this to vuex\n      this.animationQueue.splice(index, 1);\n    },\n    runAnimate: function runAnimate() {\n      // front-end/h5/src/components/core/editor/index.js created()\n      window.getEditorApp.$emit('RUN_ANIMATIONS');\n    },\n    renderSecondAnimationTabs: function renderSecondAnimationTabs(animations) {\n      var _this = this;\n\n      var h = this.$createElement;\n      return h(\"a-tabs\", {\n        \"attrs\": {\n          \"defaultActiveKey\": animations[0].value,\n          \"tabBarStyle\": {\n            marginLeft: '-16px'\n          },\n          \"size\": \"small\",\n          \"tabBarGutter\": 0,\n          \"tabPosition\": \"left\"\n        },\n        \"on\": {\n          \"change\": function change(tab) {}\n        },\n        \"style\": \"width:100%;\"\n      }, [animations.map(function (group) {\n        return h(\"a-tab-pane\", {\n          \"attrs\": {\n            \"tab\": group.label || group.value\n          },\n          \"key\": group.value\n        }, [h(\"a-list\", {\n          \"attrs\": {\n            \"grid\": {\n              gutter: 12,\n              column: 2\n            },\n            \"dataSource\": group.children,\n            \"renderItem\": function renderItem(item, index) {\n              return (// [key point] onMouseover vs onMouseenter\n                // https://stackoverflow.com/questions/7286532/jquery-mouseenter-vs-mouseover\n                // https://www.quirksmode.org/js/events_mouse.html#mouseenter\n                h(\"a-list-item\", [h(\"div\", {\n                  \"on\": {\n                    \"click\": function click(e) {\n                      // TODO move this to vuex mutation\n                      _this.editingElement.animations[_this.activeCollapsePanel].type = item.value;\n                    },\n                    \"mouseenter\": function mouseenter(e) {\n                      _this.activePreviewAnimation = item.value;\n                    },\n                    \"mouseleave\": function mouseleave() {// [key point] why not set activePreviewAnimation='' after mouseleave, see more here: https://stackoverflow.com/questions/32279782/mouseenter-called-multiple-times\n                      // this.activePreviewAnimation = ''\n                    }\n                  },\n                  \"class\": [_this.activePreviewAnimation === item.value && item.value + ' animated', 'shortcut-button']\n                }, [item.label])])\n              );\n            }\n          }\n        })]);\n      })]);\n    },\n    renderAvaiableAnimations: function renderAvaiableAnimations() {\n      var _this2 = this;\n\n      var h = this.$createElement;\n      return h(\"a-tabs\", {\n        \"attrs\": {\n          \"defaultActiveKey\": firstLevelAnimationOptions[0].label,\n          \"size\": \"small\",\n          \"tabBarGutter\": 0\n        },\n        \"on\": {\n          \"change\": function change(tab) {}\n        },\n        \"style\": \"width:100%;\"\n      }, [firstLevelAnimationOptions.map(function (firstGroup) {\n        return h(\"a-tab-pane\", {\n          \"attrs\": {\n            \"tab\": firstGroup.label\n          },\n          \"key\": firstGroup.label\n        }, [_this2.renderSecondAnimationTabs(animationOptions.filter(function (group) {\n          return !!group.label.match(firstGroup.value);\n        }))]);\n      })]);\n    },\n    renderAnimationOptions: function renderAnimationOptions(animationOption) {\n      var _this3 = this;\n\n      var h = this.$createElement;\n      return h(\"a-form\", {\n        \"attrs\": {\n          \"layout\": \"horizontal\"\n        }\n      }, [h(\"a-form-item\", {\n        \"attrs\": {\n          \"label\": this.$t('editor.editPanel.animation.type'),\n          \"labelCol\": {\n            span: 5\n          },\n          \"wrapperCol\": {\n            span: 16,\n            offset: 2\n          }\n        }\n      }, [h(\"a-button\", {\n        \"attrs\": {\n          \"type\": \"link\",\n          \"size\": \"small\",\n          \"icon\": \"ordered-list\"\n        },\n        \"on\": {\n          \"click\": function click() {\n            _this3.drawerVisible = true;\n          }\n        }\n      }, [this.$t('editor.editPanel.animation.list')])]), h(\"a-form-item\", {\n        \"attrs\": {\n          \"label\": this.$t('editor.editPanel.animation.duration'),\n          \"labelCol\": {\n            span: 5\n          },\n          \"wrapperCol\": {\n            span: 16,\n            offset: 2\n          }\n        },\n        \"style\": \"margin-bottom:0;\"\n      }, [h(\"a-form-item\", {\n        \"style\": {\n          display: 'inline-block',\n          width: 'calc(50% - 12px)'\n        }\n      }, [h(\"a-slider\", {\n        \"attrs\": {\n          \"defaultValue\": 2,\n          \"min\": 0,\n          \"max\": 20,\n          \"value\": animationOption.duration\n        },\n        \"on\": {\n          \"change\": function change(value) {\n            animationOption.duration = value;\n          }\n        }\n      })]), h(\"a-form-item\", {\n        \"style\": {\n          display: 'inline-block',\n          width: 'calc(50% - 12px)',\n          marginLeft: '4px'\n        }\n      }, [h(\"a-input-number\", {\n        \"attrs\": {\n          \"min\": 0,\n          \"max\": 20,\n          \"size\": \"small\",\n          \"formatter\": function formatter(value) {\n            return \"\".concat(value, \"\\u79D2(s)\");\n          },\n          \"value\": animationOption.duration\n        },\n        \"on\": {\n          \"change\": function change(value) {\n            animationOption.duration = value;\n          }\n        }\n      })])]), h(\"a-form-item\", {\n        \"attrs\": {\n          \"label\": this.$t('editor.editPanel.animation.type'),\n          \"labelCol\": {\n            span: 5\n          },\n          \"wrapperCol\": {\n            span: 16,\n            offset: 2\n          }\n        },\n        \"style\": \"margin-bottom:0;\"\n      }, [h(\"a-form-item\", {\n        \"style\": {\n          display: 'inline-block',\n          width: 'calc(50% - 12px)'\n        }\n      }, [h(\"a-slider\", {\n        \"attrs\": {\n          \"defaultValue\": 2,\n          \"min\": 0,\n          \"max\": 20,\n          \"value\": animationOption.delay\n        },\n        \"on\": {\n          \"change\": function change(value) {\n            animationOption.delay = value;\n          }\n        }\n      })]), h(\"a-form-item\", {\n        \"style\": {\n          display: 'inline-block',\n          width: 'calc(50% - 12px)',\n          marginLeft: '4px'\n        }\n      }, [h(\"a-input-number\", {\n        \"attrs\": {\n          \"min\": 0,\n          \"max\": 20,\n          \"size\": \"small\",\n          \"formatter\": function formatter(value) {\n            return \"\".concat(value, \"\\u79D2(s)\");\n          },\n          \"value\": animationOption.delay\n        },\n        \"on\": {\n          \"change\": function change(value) {\n            animationOption.delay = value;\n          }\n        }\n      })])]), h(\"a-form-item\", {\n        \"attrs\": {\n          \"label\": this.$t('editor.editPanel.animation.iteration'),\n          \"labelCol\": {\n            span: 5\n          },\n          \"wrapperCol\": {\n            span: 16,\n            offset: 2\n          }\n        },\n        \"style\": \"margin-bottom:0;\"\n      }, [h(\"a-form-item\", {\n        \"style\": {\n          display: 'inline-block',\n          width: 'calc(50% - 12px)'\n        }\n      }, [h(\"a-slider\", {\n        \"attrs\": {\n          \"defaultValue\": 2,\n          \"min\": 0,\n          \"max\": 20,\n          \"value\": animationOption.interationCount\n        },\n        \"on\": {\n          \"change\": function change(value) {\n            animationOption.interationCount = value;\n          }\n        }\n      })]), h(\"a-form-item\", {\n        \"style\": {\n          display: 'inline-block',\n          width: 'calc(50% - 12px)',\n          marginLeft: '4px'\n        }\n      }, [h(\"a-input-number\", {\n        \"attrs\": {\n          \"min\": 0,\n          \"max\": 20,\n          \"size\": \"small\",\n          \"formatter\": function formatter(value) {\n            return \"\".concat(value, \"\\u6B21(times)\");\n          },\n          \"value\": animationOption.interationCount\n        },\n        \"on\": {\n          \"change\": function change(value) {\n            animationOption.interationCount = value;\n          }\n        }\n      })])]), h(\"a-form-item\", {\n        \"attrs\": {\n          \"label\": this.$t('editor.editPanel.animation.inifinite'),\n          \"labelCol\": {\n            span: 5\n          },\n          \"wrapperCol\": {\n            span: 16,\n            offset: 2\n          }\n        },\n        \"style\": \"margin-bottom:0;\"\n      }, [h(\"a-switch\", {\n        \"attrs\": {\n          \"value\": animationOption.infinite\n        },\n        \"on\": {\n          \"change\": function change(value) {\n            animationOption.infinite = value;\n          }\n        }\n      })])]);\n    }\n  },\n  render: function render(h) {\n    var _this4 = this;\n\n    var ele = this.editingElement;\n    if (!ele) return h(\"span\", [this.$t('editor.editPanel.common.empty')]);\n    return h(\"div\", {\n      \"class\": \"main-animate widget\",\n      \"attrs\": {\n        \"id\": \"animation-edit-panel\"\n      }\n    }, [h(\"a-button-group\", [h(\"a-button\", {\n      \"attrs\": {\n        \"type\": \"primary\"\n      },\n      \"on\": {\n        \"click\": this.addAnimation\n      }\n    }, [h(\"a-icon\", {\n      \"attrs\": {\n        \"type\": \"plus\"\n      }\n    }), this.$t('editor.editPanel.animation.add')]), h(\"a-button\", {\n      \"attrs\": {\n        \"type\": \"primary\"\n      },\n      \"on\": {\n        \"click\": this.runAnimate\n      }\n    }, [this.$t('editor.editPanel.animation.run'), h(\"a-icon\", {\n      \"attrs\": {\n        \"type\": \"right-circle\"\n      }\n    })])]), // Q：这边为何这样写：this.animationQueue.length && ?\n    // A：如果这样写的话，当 length === 0，的时候，0会显示在 UI 上\n    !!this.animationQueue.length && h(\"a-collapse\", {\n      \"attrs\": {\n        \"accordion\": true,\n        \"activeKey\": '' + this.activeCollapsePanel\n      },\n      \"class\": \"collapse-wrapper\",\n      \"on\": {\n        \"change\": function change(key) {\n          // 当全部收起来时候，key 为 undefined\n          _this4.activeCollapsePanel = typeof key !== 'undefined' ? +key : -1;\n        }\n      }\n    }, [this.animationQueue.map(function (addedAnimation, index) {\n      return h(\"a-collapse-panel\", {\n        \"key\": \"\".concat(index)\n      }, [h(\"template\", {\n        \"slot\": \"header\"\n      }, [h(\"span\", [_this4.$t('editor.editPanel.animation.title', {\n        index: index + 1\n      })]), h(\"a-tag\", {\n        \"attrs\": {\n          \"color\": \"orange\"\n        }\n      }, [animationValue2Name[addedAnimation.type] || addedAnimation.type]), h(\"a-icon\", {\n        \"attrs\": {\n          \"type\": \"delete\",\n          \"title\": \"删除动画\"\n        },\n        \"on\": {\n          \"click\": function click() {\n            return _this4.deleteAnimate(index);\n          }\n        }\n      })]), _this4.renderAnimationOptions(addedAnimation)]);\n    })]), h(\"a-drawer\", {\n      \"attrs\": {\n        \"title\": \"请选择动画\",\n        \"placement\": \"left\",\n        \"closable\": true,\n        \"visible\": this.drawerVisible,\n        \"width\": 400,\n        \"wrapStyle\": {\n          margin: '-16px'\n        }\n      },\n      \"on\": {\n        \"close\": function close() {\n          _this4.drawerVisible = false;\n        }\n      }\n    }, [h(\"div\", {\n      \"style\": \"width: 100%;\"\n    }, [this.renderAvaiableAnimations()])])]);\n  }\n};",{"version":3,"sources":["d:/project/luban/luban-h5/front-end/h5/src/components/core/editor/edit-panel/animation.js"],"names":["mapState","animationOptions","animationValue2Name","firstLevelAnimationOptions","computed","animationQueue","editingElement","animations","data","activeCollapsePanel","activePreviewAnimation","drawerVisible","methods","addAnimation","push","type","duration","delay","interationCount","infinite","length","deleteAnimate","index","splice","runAnimate","window","getEditorApp","$emit","renderSecondAnimationTabs","value","marginLeft","tab","map","group","label","gutter","column","children","item","e","renderAvaiableAnimations","firstGroup","filter","match","renderAnimationOptions","animationOption","$t","span","offset","display","width","render","h","ele","key","addedAnimation","margin"],"mappings":"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","sourcesContent":["import { mapState } from 'vuex'\r\nimport { animationOptions, animationValue2Name, firstLevelAnimationOptions } from '@/constants/animation.js'\r\n\r\nexport default {\r\n  computed: {\r\n    ...mapState('editor', ['editingElement']),\r\n    animationQueue () {\r\n      return (this.editingElement && this.editingElement.animations) || []\r\n    }\r\n  },\r\n  data: () => ({\r\n    // animationQueue: [],\r\n    activeCollapsePanel: 0,\r\n    activePreviewAnimation: '',\r\n    drawerVisible: false\r\n  }),\r\n  methods: {\r\n    addAnimation () {\r\n      // TODO move this to vuex\r\n      this.animationQueue.push({\r\n        type: '',\r\n        duration: 1,\r\n        delay: 0,\r\n        interationCount: 1,\r\n        infinite: false\r\n      })\r\n      this.activeCollapsePanel = this.animationQueue.length - 1\r\n    },\r\n    deleteAnimate (index) {\r\n      // TODO move this to vuex\r\n      this.animationQueue.splice(index, 1)\r\n    },\r\n    runAnimate () {\r\n      // front-end/h5/src/components/core/editor/index.js created()\r\n      window.getEditorApp.$emit('RUN_ANIMATIONS')\r\n    },\r\n    renderSecondAnimationTabs (animations) {\r\n      return (\r\n        <a-tabs\r\n          defaultActiveKey={animations[0].value}\r\n          onChange={tab => {}}\r\n          style=\"width:100%;\"\r\n          tabBarStyle={{ marginLeft: '-16px' }}\r\n          size=\"small\"\r\n          tabBarGutter={0}\r\n          tabPosition=\"left\"\r\n        >\r\n          {\r\n            animations.map(group => (\r\n              <a-tab-pane tab={group.label || group.value} key={group.value}>\r\n                <a-list\r\n                  grid={{ gutter: 12, column: 2 }}\r\n                  dataSource={group.children}\r\n                  renderItem={(item, index) => (\r\n                    // [key point] onMouseover vs onMouseenter\r\n                    // https://stackoverflow.com/questions/7286532/jquery-mouseenter-vs-mouseover\r\n                    // https://www.quirksmode.org/js/events_mouse.html#mouseenter\r\n                    <a-list-item>\r\n                      <div\r\n                        onClick={(e) => {\r\n                          // TODO move this to vuex mutation\r\n                          this.editingElement.animations[this.activeCollapsePanel].type = item.value\r\n                        }}\r\n                        class={[this.activePreviewAnimation === item.value && item.value + ' animated', 'shortcut-button']}\r\n                        onMouseenter={(e) => {\r\n                          this.activePreviewAnimation = item.value\r\n                        }}\r\n                        onMouseleave={() => {\r\n                          // [key point] why not set activePreviewAnimation='' after mouseleave, see more here: https://stackoverflow.com/questions/32279782/mouseenter-called-multiple-times\r\n                          // this.activePreviewAnimation = ''\r\n                        }}\r\n                      >\r\n                        {item.label}\r\n                      </div>\r\n                    </a-list-item>\r\n                  )}\r\n                >\r\n                </a-list>\r\n              </a-tab-pane>\r\n            ))\r\n          }\r\n        </a-tabs>\r\n      )\r\n    },\r\n    renderAvaiableAnimations () {\r\n      return (\r\n        <a-tabs\r\n          defaultActiveKey={firstLevelAnimationOptions[0].label}\r\n          onChange={tab => {}}\r\n          style=\"width:100%;\"\r\n          // tabBarStyle={{}}\r\n          size=\"small\"\r\n          tabBarGutter={0}\r\n        >\r\n          {\r\n            firstLevelAnimationOptions.map(firstGroup => (\r\n              <a-tab-pane tab={firstGroup.label} key={firstGroup.label}>\r\n                {/* group.label.match(firstGroup.value) <-> !!'abc'.match(/a|e/) === true */}\r\n                {this.renderSecondAnimationTabs(animationOptions.filter(group => !!group.label.match(firstGroup.value)))}\r\n              </a-tab-pane>\r\n            ))\r\n          }\r\n        </a-tabs>\r\n      )\r\n    },\r\n    renderAnimationOptions (animationOption) {\r\n      return (\r\n        <a-form layout=\"horizontal\">\r\n          <a-form-item label={this.$t('editor.editPanel.animation.type')} labelCol={{ span: 5 }} wrapperCol={{ span: 16, offset: 2 }}>\r\n            {/* <a-popover placement=\"left\" title=\"动画列表\" trigger=\"click\">\r\n              <template slot=\"content\">\r\n                {this.renderAvaiableAnimations()}\r\n              </template>\r\n              <a-button type=\"primary\">动画列表</a-button>\r\n            </a-popover> */}\r\n            {/* 动画列表 */}\r\n            <a-button type=\"link\" size=\"small\" icon=\"ordered-list\" onClick={() => { this.drawerVisible = true }}>{this.$t('editor.editPanel.animation.list')}</a-button>\r\n          </a-form-item>\r\n          <a-form-item label={this.$t('editor.editPanel.animation.duration')} labelCol={{ span: 5 }} wrapperCol={{ span: 16, offset: 2 }} style=\"margin-bottom:0;\">\r\n            <a-form-item style={{ display: 'inline-block', width: 'calc(50% - 12px)' }}>\r\n              <a-slider\r\n                defaultValue={2}\r\n                min={0}\r\n                max={20}\r\n                value={animationOption.duration}\r\n                onChange={value => {\r\n                  animationOption.duration = value\r\n                }}\r\n              />\r\n            </a-form-item>\r\n            <a-form-item style={{ display: 'inline-block', width: 'calc(50% - 12px)', marginLeft: '4px' }}>\r\n              <a-input-number\r\n                min={0}\r\n                max={20}\r\n                size=\"small\"\r\n                formatter={value => `${value}秒(s)`}\r\n                value={animationOption.duration}\r\n                onChange={value => {\r\n                  animationOption.duration = value\r\n                }}\r\n              />\r\n            </a-form-item>\r\n          </a-form-item>\r\n          <a-form-item label={this.$t('editor.editPanel.animation.type')} labelCol={{ span: 5 }} wrapperCol={{ span: 16, offset: 2 }} style=\"margin-bottom:0;\">\r\n            <a-form-item style={{ display: 'inline-block', width: 'calc(50% - 12px)' }}>\r\n              <a-slider\r\n                defaultValue={2}\r\n                min={0}\r\n                max={20}\r\n                value={animationOption.delay}\r\n                onChange={value => {\r\n                  animationOption.delay = value\r\n                }}\r\n              />\r\n            </a-form-item>\r\n            <a-form-item style={{ display: 'inline-block', width: 'calc(50% - 12px)', marginLeft: '4px' }}>\r\n              <a-input-number\r\n                min={0}\r\n                max={20}\r\n                size=\"small\"\r\n                formatter={value => `${value}秒(s)`}\r\n                value={animationOption.delay}\r\n                onChange={value => {\r\n                  animationOption.delay = value\r\n                }}\r\n              />\r\n            </a-form-item>\r\n          </a-form-item>\r\n          <a-form-item label={this.$t('editor.editPanel.animation.iteration')} labelCol={{ span: 5 }} wrapperCol={{ span: 16, offset: 2 }} style=\"margin-bottom:0;\">\r\n            <a-form-item style={{ display: 'inline-block', width: 'calc(50% - 12px)' }}>\r\n              <a-slider\r\n                defaultValue={2}\r\n                min={0}\r\n                max={20}\r\n                value={animationOption.interationCount}\r\n                onChange={value => {\r\n                  animationOption.interationCount = value\r\n                }}\r\n              />\r\n            </a-form-item>\r\n            <a-form-item style={{ display: 'inline-block', width: 'calc(50% - 12px)', marginLeft: '4px' }}>\r\n              <a-input-number\r\n                min={0}\r\n                max={20}\r\n                size=\"small\"\r\n                formatter={value => `${value}次(times)`}\r\n                value={animationOption.interationCount}\r\n                onChange={value => {\r\n                  animationOption.interationCount = value\r\n                }}\r\n              />\r\n            </a-form-item>\r\n          </a-form-item>\r\n          <a-form-item label={this.$t('editor.editPanel.animation.inifinite')} labelCol={{ span: 5 }} wrapperCol={{ span: 16, offset: 2 }} style=\"margin-bottom:0;\">\r\n            <a-switch\r\n              value={animationOption.infinite}\r\n              onChange={value => {\r\n                animationOption.infinite = value\r\n              }}\r\n            />\r\n          </a-form-item>\r\n        </a-form>\r\n      )\r\n    }\r\n  },\r\n  render (h) {\r\n    const ele = this.editingElement\r\n    if (!ele) return (<span>{this.$t('editor.editPanel.common.empty')}</span>)\r\n    return (\r\n      <div class=\"main-animate widget\" id=\"animation-edit-panel\">\r\n        <a-button-group>\r\n          {/* 添加动画、运行动画 */}\r\n          <a-button type=\"primary\" onClick={this.addAnimation}><a-icon type=\"plus\" />{this.$t('editor.editPanel.animation.add')}</a-button>\r\n          <a-button type=\"primary\" onClick={this.runAnimate}>{this.$t('editor.editPanel.animation.run')}<a-icon type=\"right-circle\" /></a-button>\r\n        </a-button-group>\r\n        {\r\n          // Q：这边为何这样写：this.animationQueue.length && ?\r\n          // A：如果这样写的话，当 length === 0，的时候，0会显示在 UI 上\r\n          !!this.animationQueue.length &&\r\n          <a-collapse\r\n            accordion\r\n            class=\"collapse-wrapper\"\r\n            activeKey={'' + this.activeCollapsePanel}\r\n            onChange={(key) => {\r\n              // 当全部收起来时候，key 为 undefined\r\n              this.activeCollapsePanel = typeof key !== 'undefined' ? +key : -1\r\n            }}\r\n          >\r\n            {\r\n              this.animationQueue.map((addedAnimation, index) => (\r\n                <a-collapse-panel key={`${index}`}>\r\n                  <template slot=\"header\">\r\n                    {/* #!zh: 动画{index + 1} */}\r\n                    {/* #!en: Animation{index + 1}</span> */}\r\n                    <span>{this.$t('editor.editPanel.animation.title', { index: index + 1 })}</span>\r\n                    <a-tag color=\"orange\">{animationValue2Name[addedAnimation.type] || addedAnimation.type }</a-tag>\r\n                    <a-icon type=\"delete\" onClick={() => this.deleteAnimate(index)} title=\"删除动画\"></a-icon>\r\n                  </template>\r\n                  {this.renderAnimationOptions(addedAnimation)}\r\n                </a-collapse-panel>\r\n              ))\r\n            }\r\n          </a-collapse>\r\n        }\r\n\r\n        <a-drawer\r\n          title=\"请选择动画\"\r\n          placement=\"left\"\r\n          closable={true}\r\n          onClose={() => { this.drawerVisible = false }}\r\n          visible={this.drawerVisible}\r\n          width={400}\r\n          wrapStyle={{ margin: '-16px' }}\r\n        >\r\n          <div style=\"width: 100%;\">\r\n            {this.renderAvaiableAnimations()}\r\n          </div>\r\n        </a-drawer>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]}]}