{"remainingRequest":"D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\luban\\luban-h5\\front-end\\h5\\src\\components\\core\\editor\\shortcuts-panel\\load-npm-plugins.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\luban\\luban-h5\\front-end\\h5\\src\\components\\core\\editor\\shortcuts-panel\\load-npm-plugins.vue","mtime":1575526862192},{"path":"D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1575454486584},{"path":"D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\babel-loader\\lib\\index.js","mtime":1575361257763},{"path":"D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1575454486584},{"path":"D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\vue-loader\\lib\\index.js","mtime":1575454488300}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport _defineProperty from \"D:\\\\project\\\\luban\\\\luban-h5\\\\front-end\\\\h5\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.regexp.replace\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from 'vue';\nexport default {\n  data: function data() {\n    return {\n      visible: false,\n      confirmLoading: false,\n      text: JSON.stringify([{\n        'package': '@luban-h5/lbp-slide',\n        'version': '0.0.7',\n        'name': 'lbp-slide',\n        'icon': 'photo',\n        'i18nTitle': {\n          'en-US': 'Carousel',\n          'zh-CN': '轮播图'\n        },\n        title: '轮播图',\n        visible: true\n      }], null, 2)\n    };\n  },\n  methods: {\n    showModal: function showModal() {\n      this.visible = true;\n    },\n    handleOk: function handleOk(e) {\n      var createjs = window.createjs; // eslint-disable-next-line no-new-func\n\n      var npmPackages = new Function(\"return \".concat(this.text).replace('\\n', ''))();\n      npmPackages = npmPackages.map(function (pluginInfo) {\n        return _objectSpread({}, pluginInfo, {\n          // src: `https://cdn.jsdelivr.net/npm/${pluginInfo}/dist/${pluginInfo.name}.umd.js`\n          // src: `https://unpkg.com/${pluginInfo}/dist/${pluginName}.umd.js`\n          src: \"https://cdn.jsdelivr.net/npm/\".concat(pluginInfo.package, \"@\").concat(pluginInfo.version, \"/dist/\").concat(pluginInfo.name, \".umd.js\")\n        });\n      });\n      var queue = new createjs.LoadQueue();\n      queue.on('fileload', handleFileLoad, this);\n      queue.on('complete', handleComplete, this);\n      queue.loadManifest(npmPackages);\n\n      function handleComplete(e) {\n        // 可以直接使用 this 的原因： query。on 最后一个参数用来做做 bind this 操作\n        this.visible = false;\n        this.confirmLoading = false;\n        this.$emit('loadComplete', npmPackages);\n      }\n\n      function handleFileLoad(event) {\n        var name = event.item.name;\n        Vue.component(name, window[name]);\n      }\n    },\n    handleCancel: function handleCancel(e) {\n      this.visible = false;\n    }\n  }\n};",{"version":3,"sources":["load-npm-plugins.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,OAAA,GAAA,MAAA,KAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,cAAA,EAAA,KAFA;AAGA,MAAA,IAAA,EAAA,IAAA,CAAA,SAAA,CACA,CACA;AACA,mBAAA,qBADA;AAEA,mBAAA,OAFA;AAGA,gBAAA,WAHA;AAIA,gBAAA,OAJA;AAKA,qBAAA;AACA,mBAAA,UADA;AAEA,mBAAA;AAFA,SALA;AASA,QAAA,KAAA,EAAA,KATA;AAUA,QAAA,OAAA,EAAA;AAVA,OADA,CADA,EAcA,IAdA,EAcA,CAdA;AAHA,KAAA;AAmBA,GArBA;AAsBA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA,WAAA,OAAA,GAAA,IAAA;AACA,KAHA;AAIA,IAAA,QAJA,oBAIA,CAJA,EAIA;AACA,UAAA,QAAA,GAAA,MAAA,CAAA,QAAA,CADA,CAGA;;AACA,UAAA,WAAA,GAAA,IAAA,QAAA,CAAA,iBAAA,KAAA,IAAA,EAAA,OAAA,CAAA,IAAA,EAAA,EAAA,CAAA,GAAA;AACA,MAAA,WAAA,GAAA,WAAA,CAAA,GAAA,CAAA,UAAA,UAAA;AAAA,iCACA,UADA;AAEA;AACA;AACA,UAAA,GAAA,yCAAA,UAAA,CAAA,OAAA,cAAA,UAAA,CAAA,OAAA,mBAAA,UAAA,CAAA,IAAA;AAJA;AAAA,OAAA,CAAA;AAOA,UAAA,KAAA,GAAA,IAAA,QAAA,CAAA,SAAA,EAAA;AACA,MAAA,KAAA,CAAA,EAAA,CAAA,UAAA,EAAA,cAAA,EAAA,IAAA;AACA,MAAA,KAAA,CAAA,EAAA,CAAA,UAAA,EAAA,cAAA,EAAA,IAAA;AAEA,MAAA,KAAA,CAAA,YAAA,CAAA,WAAA;;AACA,eAAA,cAAA,CAAA,CAAA,EAAA;AACA;AACA,aAAA,OAAA,GAAA,KAAA;AACA,aAAA,cAAA,GAAA,KAAA;AACA,aAAA,KAAA,CAAA,cAAA,EAAA,WAAA;AACA;;AAEA,eAAA,cAAA,CAAA,KAAA,EAAA;AAAA,YACA,IADA,GACA,KAAA,CAAA,IADA,CACA,IADA;AAEA,QAAA,GAAA,CAAA,SAAA,CAAA,IAAA,EAAA,MAAA,CAAA,IAAA,CAAA;AACA;AACA,KAhCA;AAiCA,IAAA,YAjCA,wBAiCA,CAjCA,EAiCA;AACA,WAAA,OAAA,GAAA,KAAA;AACA;AAnCA;AAtBA,CAAA","sourcesContent":["<!--\r\n * @Author: ly525\r\n * @Date: 2019-11-23 12:35:43\r\n * @LastEditors: ly525\r\n * @LastEditTime: 2019-11-23 19:37:29\r\n * @FilePath: /luban-h5/front-end/h5/src/components/core/editor/shortcuts-panel/load-npm-plugins.vue\r\n * @Github: https://github.com/ly525/luban-h5\r\n * @Description: Do not edit\r\n * @Copyright 2018 - 2019 luban-h5. All Rights Reserved\r\n -->\r\n\r\n<template>\r\n  <div style=\"text-align: center\">\r\n    <a-button type=\"primary\" @click=\"showModal\">配置 NPM 组件列表</a-button>\r\n    <a-modal\r\n      title=\"NPM 组件列表配置信息\"\r\n      :visible=\"visible\"\r\n      @ok=\"handleOk\"\r\n      :confirmLoading=\"confirmLoading\"\r\n      @cancel=\"handleCancel\"\r\n    >\r\n      <div>\r\n        <a-textarea v-model=\"text\" placeholder=\"Basic usage\"  :rows=\"20\" />\r\n      </div>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Vue from 'vue'\r\nexport default {\r\n  data () {\r\n    return {\r\n      visible: false,\r\n      confirmLoading: false,\r\n      text: JSON.stringify(\r\n        [\r\n          {\r\n            'package': '@luban-h5/lbp-slide',\r\n            'version': '0.0.7',\r\n            'name': 'lbp-slide',\r\n            'icon': 'photo',\r\n            'i18nTitle': {\r\n              'en-US': 'Carousel',\r\n              'zh-CN': '轮播图'\r\n            },\r\n            title: '轮播图',\r\n            visible: true\r\n          }\r\n        ], null, 2)\r\n    }\r\n  },\r\n  methods: {\r\n    showModal () {\r\n      this.visible = true\r\n    },\r\n    handleOk (e) {\r\n      const createjs = window.createjs\r\n\r\n      // eslint-disable-next-line no-new-func\r\n      let npmPackages = new Function(`return ${this.text}`.replace('\\n', ''))()\r\n      npmPackages = npmPackages.map(pluginInfo => ({\r\n        ...pluginInfo,\r\n        // src: `https://cdn.jsdelivr.net/npm/${pluginInfo}/dist/${pluginInfo.name}.umd.js`\r\n        // src: `https://unpkg.com/${pluginInfo}/dist/${pluginName}.umd.js`\r\n        src: `https://cdn.jsdelivr.net/npm/${pluginInfo.package}@${pluginInfo.version}/dist/${pluginInfo.name}.umd.js`\r\n      }))\r\n\r\n      const queue = new createjs.LoadQueue()\r\n      queue.on('fileload', handleFileLoad, this)\r\n      queue.on('complete', handleComplete, this)\r\n\r\n      queue.loadManifest(npmPackages)\r\n      function handleComplete (e) {\r\n        // 可以直接使用 this 的原因： query。on 最后一个参数用来做做 bind this 操作\r\n        this.visible = false\r\n        this.confirmLoading = false\r\n        this.$emit('loadComplete', npmPackages)\r\n      }\r\n\r\n      function handleFileLoad (event) {\r\n        const { name } = event.item\r\n        Vue.component(name, window[name])\r\n      }\r\n    },\r\n    handleCancel (e) {\r\n      this.visible = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/components/core/editor/shortcuts-panel"}]}