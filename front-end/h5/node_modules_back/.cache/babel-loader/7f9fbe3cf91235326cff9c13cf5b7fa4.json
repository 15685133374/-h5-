{"remainingRequest":"d:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\thread-loader\\dist\\cjs.js!d:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\babel-loader\\lib\\index.js!d:\\project\\luban\\luban-h5\\front-end\\h5\\src\\components\\core\\editor\\edit-panel\\animation.js","dependencies":[{"path":"d:\\project\\luban\\luban-h5\\front-end\\h5\\src\\components\\core\\editor\\edit-panel\\animation.js","mtime":1575526862162},{"path":"d:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1575454486584},{"path":"d:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1575454488217},{"path":"d:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\babel-loader\\lib\\index.js","mtime":1575361257763}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.match\";\nimport _defineProperty from \"d:\\\\project\\\\luban\\\\luban-h5\\\\front-end\\\\h5\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { mapState } from 'vuex';\nimport { animationOptions, animationValue2Name, firstLevelAnimationOptions } from '@/constants/animation.js';\nexport default {\n  computed: _objectSpread({}, mapState('editor', ['editingElement']), {\n    animationQueue: function animationQueue() {\n      return this.editingElement && this.editingElement.animations || [];\n    }\n  }),\n  data: function data() {\n    return {\n      // animationQueue: [],\n      activeCollapsePanel: 0,\n      activePreviewAnimation: '',\n      drawerVisible: false\n    };\n  },\n  methods: {\n    addAnimation: function addAnimation() {\n      // TODO move this to vuex\n      this.animationQueue.push({\n        type: '',\n        duration: 1,\n        delay: 0,\n        interationCount: 1,\n        infinite: false\n      });\n      this.activeCollapsePanel = this.animationQueue.length - 1;\n    },\n    deleteAnimate: function deleteAnimate(index) {\n      // TODO move this to vuex\n      this.animationQueue.splice(index, 1);\n    },\n    runAnimate: function runAnimate() {\n      // front-end/h5/src/components/core/editor/index.js created()\n      window.getEditorApp.$emit('RUN_ANIMATIONS');\n    },\n    renderSecondAnimationTabs: function renderSecondAnimationTabs(animations) {\n      var _this = this;\n\n      var h = this.$createElement;\n      return h(\"a-tabs\", {\n        \"attrs\": {\n          \"defaultActiveKey\": animations[0].value,\n          \"tabBarStyle\": {\n            marginLeft: '-16px'\n          },\n          \"size\": \"small\",\n          \"tabBarGutter\": 0,\n          \"tabPosition\": \"left\"\n        },\n        \"on\": {\n          \"change\": function change(tab) {}\n        },\n        \"style\": \"width:100%;\"\n      }, [animations.map(function (group) {\n        return h(\"a-tab-pane\", {\n          \"attrs\": {\n            \"tab\": group.label || group.value\n          },\n          \"key\": group.value\n        }, [h(\"a-list\", {\n          \"attrs\": {\n            \"grid\": {\n              gutter: 12,\n              column: 2\n            },\n            \"dataSource\": group.children,\n            \"renderItem\": function renderItem(item, index) {\n              return (// [key point] onMouseover vs onMouseenter\n                // https://stackoverflow.com/questions/7286532/jquery-mouseenter-vs-mouseover\n                // https://www.quirksmode.org/js/events_mouse.html#mouseenter\n                h(\"a-list-item\", [h(\"div\", {\n                  \"on\": {\n                    \"click\": function click(e) {\n                      // TODO move this to vuex mutation\n                      _this.editingElement.animations[_this.activeCollapsePanel].type = item.value;\n                    },\n                    \"mouseenter\": function mouseenter(e) {\n                      _this.activePreviewAnimation = item.value;\n                    },\n                    \"mouseleave\": function mouseleave() {// [key point] why not set activePreviewAnimation='' after mouseleave, see more here: https://stackoverflow.com/questions/32279782/mouseenter-called-multiple-times\n                      // this.activePreviewAnimation = ''\n                    }\n                  },\n                  \"class\": [_this.activePreviewAnimation === item.value && item.value + ' animated', 'shortcut-button']\n                }, [item.label])])\n              );\n            }\n          }\n        })]);\n      })]);\n    },\n    renderAvaiableAnimations: function renderAvaiableAnimations() {\n      var _this2 = this;\n\n      var h = this.$createElement;\n      return h(\"a-tabs\", {\n        \"attrs\": {\n          \"defaultActiveKey\": firstLevelAnimationOptions[0].label,\n          \"size\": \"small\",\n          \"tabBarGutter\": 0\n        },\n        \"on\": {\n          \"change\": function change(tab) {}\n        },\n        \"style\": \"width:100%;\"\n      }, [firstLevelAnimationOptions.map(function (firstGroup) {\n        return h(\"a-tab-pane\", {\n          \"attrs\": {\n            \"tab\": firstGroup.label\n          },\n          \"key\": firstGroup.label\n        }, [_this2.renderSecondAnimationTabs(animationOptions.filter(function (group) {\n          return !!group.label.match(firstGroup.value);\n        }))]);\n      })]);\n    },\n    renderAnimationOptions: function renderAnimationOptions(animationOption) {\n      var _this3 = this;\n\n      var h = this.$createElement;\n      return h(\"a-form\", {\n        \"attrs\": {\n          \"layout\": \"horizontal\"\n        }\n      }, [h(\"a-form-item\", {\n        \"attrs\": {\n          \"label\": this.$t('editor.editPanel.animation.type'),\n          \"labelCol\": {\n            span: 5\n          },\n          \"wrapperCol\": {\n            span: 16,\n            offset: 2\n          }\n        }\n      }, [h(\"a-button\", {\n        \"attrs\": {\n          \"type\": \"link\",\n          \"size\": \"small\",\n          \"icon\": \"ordered-list\"\n        },\n        \"on\": {\n          \"click\": function click() {\n            _this3.drawerVisible = true;\n          }\n        }\n      }, [this.$t('editor.editPanel.animation.list')])]), h(\"a-form-item\", {\n        \"attrs\": {\n          \"label\": this.$t('editor.editPanel.animation.duration'),\n          \"labelCol\": {\n            span: 5\n          },\n          \"wrapperCol\": {\n            span: 16,\n            offset: 2\n          }\n        },\n        \"style\": \"margin-bottom:0;\"\n      }, [h(\"a-form-item\", {\n        \"style\": {\n          display: 'inline-block',\n          width: 'calc(50% - 12px)'\n        }\n      }, [h(\"a-slider\", {\n        \"attrs\": {\n          \"defaultValue\": 2,\n          \"min\": 0,\n          \"max\": 20,\n          \"value\": animationOption.duration\n        },\n        \"on\": {\n          \"change\": function change(value) {\n            animationOption.duration = value;\n          }\n        }\n      })]), h(\"a-form-item\", {\n        \"style\": {\n          display: 'inline-block',\n          width: 'calc(50% - 12px)',\n          marginLeft: '4px'\n        }\n      }, [h(\"a-input-number\", {\n        \"attrs\": {\n          \"min\": 0,\n          \"max\": 20,\n          \"size\": \"small\",\n          \"formatter\": function formatter(value) {\n            return \"\".concat(value, \"\\u79D2(s)\");\n          },\n          \"value\": animationOption.duration\n        },\n        \"on\": {\n          \"change\": function change(value) {\n            animationOption.duration = value;\n          }\n        }\n      })])]), h(\"a-form-item\", {\n        \"attrs\": {\n          \"label\": this.$t('editor.editPanel.animation.type'),\n          \"labelCol\": {\n            span: 5\n          },\n          \"wrapperCol\": {\n            span: 16,\n            offset: 2\n          }\n        },\n        \"style\": \"margin-bottom:0;\"\n      }, [h(\"a-form-item\", {\n        \"style\": {\n          display: 'inline-block',\n          width: 'calc(50% - 12px)'\n        }\n      }, [h(\"a-slider\", {\n        \"attrs\": {\n          \"defaultValue\": 2,\n          \"min\": 0,\n          \"max\": 20,\n          \"value\": animationOption.delay\n        },\n        \"on\": {\n          \"change\": function change(value) {\n            animationOption.delay = value;\n          }\n        }\n      })]), h(\"a-form-item\", {\n        \"style\": {\n          display: 'inline-block',\n          width: 'calc(50% - 12px)',\n          marginLeft: '4px'\n        }\n      }, [h(\"a-input-number\", {\n        \"attrs\": {\n          \"min\": 0,\n          \"max\": 20,\n          \"size\": \"small\",\n          \"formatter\": function formatter(value) {\n            return \"\".concat(value, \"\\u79D2(s)\");\n          },\n          \"value\": animationOption.delay\n        },\n        \"on\": {\n          \"change\": function change(value) {\n            animationOption.delay = value;\n          }\n        }\n      })])]), h(\"a-form-item\", {\n        \"attrs\": {\n          \"label\": this.$t('editor.editPanel.animation.iteration'),\n          \"labelCol\": {\n            span: 5\n          },\n          \"wrapperCol\": {\n            span: 16,\n            offset: 2\n          }\n        },\n        \"style\": \"margin-bottom:0;\"\n      }, [h(\"a-form-item\", {\n        \"style\": {\n          display: 'inline-block',\n          width: 'calc(50% - 12px)'\n        }\n      }, [h(\"a-slider\", {\n        \"attrs\": {\n          \"defaultValue\": 2,\n          \"min\": 0,\n          \"max\": 20,\n          \"value\": animationOption.interationCount\n        },\n        \"on\": {\n          \"change\": function change(value) {\n            animationOption.interationCount = value;\n          }\n        }\n      })]), h(\"a-form-item\", {\n        \"style\": {\n          display: 'inline-block',\n          width: 'calc(50% - 12px)',\n          marginLeft: '4px'\n        }\n      }, [h(\"a-input-number\", {\n        \"attrs\": {\n          \"min\": 0,\n          \"max\": 20,\n          \"size\": \"small\",\n          \"formatter\": function formatter(value) {\n            return \"\".concat(value, \"\\u6B21(times)\");\n          },\n          \"value\": animationOption.interationCount\n        },\n        \"on\": {\n          \"change\": function change(value) {\n            animationOption.interationCount = value;\n          }\n        }\n      })])]), h(\"a-form-item\", {\n        \"attrs\": {\n          \"label\": this.$t('editor.editPanel.animation.inifinite'),\n          \"labelCol\": {\n            span: 5\n          },\n          \"wrapperCol\": {\n            span: 16,\n            offset: 2\n          }\n        },\n        \"style\": \"margin-bottom:0;\"\n      }, [h(\"a-switch\", {\n        \"attrs\": {\n          \"value\": animationOption.infinite\n        },\n        \"on\": {\n          \"change\": function change(value) {\n            animationOption.infinite = value;\n          }\n        }\n      })])]);\n    }\n  },\n  render: function render(h) {\n    var _this4 = this;\n\n    var ele = this.editingElement;\n    if (!ele) return h(\"span\", [this.$t('editor.editPanel.common.empty')]);\n    return h(\"div\", {\n      \"class\": \"main-animate widget\",\n      \"attrs\": {\n        \"id\": \"animation-edit-panel\"\n      }\n    }, [h(\"a-button-group\", [h(\"a-button\", {\n      \"attrs\": {\n        \"type\": \"primary\"\n      },\n      \"on\": {\n        \"click\": this.addAnimation\n      }\n    }, [h(\"a-icon\", {\n      \"attrs\": {\n        \"type\": \"plus\"\n      }\n    }), this.$t('editor.editPanel.animation.add')]), h(\"a-button\", {\n      \"attrs\": {\n        \"type\": \"primary\"\n      },\n      \"on\": {\n        \"click\": this.runAnimate\n      }\n    }, [this.$t('editor.editPanel.animation.run'), h(\"a-icon\", {\n      \"attrs\": {\n        \"type\": \"right-circle\"\n      }\n    })])]), // Q：这边为何这样写：this.animationQueue.length && ?\n    // A：如果这样写的话，当 length === 0，的时候，0会显示在 UI 上\n    !!this.animationQueue.length && h(\"a-collapse\", {\n      \"attrs\": {\n        \"accordion\": true,\n        \"activeKey\": '' + this.activeCollapsePanel\n      },\n      \"class\": \"collapse-wrapper\",\n      \"on\": {\n        \"change\": function change(key) {\n          // 当全部收起来时候，key 为 undefined\n          _this4.activeCollapsePanel = typeof key !== 'undefined' ? +key : -1;\n        }\n      }\n    }, [this.animationQueue.map(function (addedAnimation, index) {\n      return h(\"a-collapse-panel\", {\n        \"key\": \"\".concat(index)\n      }, [h(\"template\", {\n        \"slot\": \"header\"\n      }, [h(\"span\", [_this4.$t('editor.editPanel.animation.title', {\n        index: index + 1\n      })]), h(\"a-tag\", {\n        \"attrs\": {\n          \"color\": \"orange\"\n        }\n      }, [animationValue2Name[addedAnimation.type] || addedAnimation.type]), h(\"a-icon\", {\n        \"attrs\": {\n          \"type\": \"delete\",\n          \"title\": \"删除动画\"\n        },\n        \"on\": {\n          \"click\": function click() {\n            return _this4.deleteAnimate(index);\n          }\n        }\n      })]), _this4.renderAnimationOptions(addedAnimation)]);\n    })]), h(\"a-drawer\", {\n      \"attrs\": {\n        \"title\": \"请选择动画\",\n        \"placement\": \"left\",\n        \"closable\": true,\n        \"visible\": this.drawerVisible,\n        \"width\": 400,\n        \"wrapStyle\": {\n          margin: '-16px'\n        }\n      },\n      \"on\": {\n        \"close\": function close() {\n          _this4.drawerVisible = false;\n        }\n      }\n    }, [h(\"div\", {\n      \"style\": \"width: 100%;\"\n    }, [this.renderAvaiableAnimations()])])]);\n  }\n};",null]}