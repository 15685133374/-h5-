{"remainingRequest":"D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\luban\\luban-h5\\front-end\\h5\\src\\components\\core\\editor\\shortcuts-panel\\load-npm-plugins.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\luban\\luban-h5\\front-end\\h5\\src\\components\\core\\editor\\shortcuts-panel\\load-npm-plugins.vue","mtime":1575871735112},{"path":"D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1575454486584},{"path":"D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1575454488217},{"path":"D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\babel-loader\\lib\\index.js","mtime":1575361257763},{"path":"D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1575454486584},{"path":"D:\\project\\luban\\luban-h5\\front-end\\h5\\node_modules\\vue-loader\\lib\\index.js","mtime":1575454488300}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport Vue from 'vue'\r\nexport default {\r\n  data () {\r\n    return {\r\n      visible: false,\r\n      confirmLoading: false,\r\n      text: JSON.stringify(\r\n        [\r\n          {\r\n            'package': '@luban-h5/lbp-slide',\r\n            'version': '0.0.7',\r\n            'name': 'lbp-slide',\r\n            'icon': 'photo',\r\n            'i18nTitle': {\r\n              'en-US': 'Carousel',\r\n              'zh-CN': '轮播图'\r\n            },\r\n            title: '轮播图',\r\n            visible: true\r\n          }\r\n        ], null, 2)\r\n    }\r\n  },\r\n  methods: {\r\n    showModal () {\r\n      this.visible = true\r\n    },\r\n    handleOk (e) {\r\n      const createjs = window.createjs\r\n\r\n      // eslint-disable-next-line no-new-func\r\n      let npmPackages = new Function(`return ${this.text}`.replace('\\n', ''))()\r\n      npmPackages = npmPackages.map(pluginInfo => ({\r\n        ...pluginInfo,\r\n        // src: `https://cdn.jsdelivr.net/npm/${pluginInfo}/dist/${pluginInfo.name}.umd.js`\r\n        // src: `https://unpkg.com/${pluginInfo}/dist/${pluginName}.umd.js`\r\n        src: `https://cdn.jsdelivr.net/npm/${pluginInfo.package}@${pluginInfo.version}/dist/${pluginInfo.name}.umd.js`\r\n      }))\r\n\r\n      const queue = new createjs.LoadQueue()\r\n      queue.on('fileload', handleFileLoad, this)\r\n      queue.on('complete', handleComplete, this)\r\n\r\n      queue.loadManifest(npmPackages)\r\n      function handleComplete (e) {\r\n        // 可以直接使用 this 的原因： query。on 最后一个参数用来做做 bind this 操作\r\n        this.visible = false\r\n        this.confirmLoading = false\r\n        this.$emit('loadComplete', npmPackages)\r\n      }\r\n\r\n      function handleFileLoad (event) {\r\n        const { name } = event.item\r\n        Vue.component(name, window[name])\r\n      }\r\n    },\r\n    handleCancel (e) {\r\n      this.visible = false\r\n    }\r\n  }\r\n}\r\n",null]}